{% extends "base.html" %}
{% block title %}Persoanl Plans{% endblock %}
{% block head %}
<style>
    .fa-trash:hover{
        color: red;
    }

    .fa-credit-card:hover{
        color: dodgerblue;
    }

    body{
        background-color: #eee !important;
    }

</style>
{% endblock %}
{% block body %}
<div class="main-panel" style="padding: 10% 10% 8% 10%">
    <div class="content-wrapper">
        <div class="row">
            <div class="col-lg-8 grid-margin stretch-card" style="width: 100%">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title" style="margin: 3% 0 2% 0">Your Personal Plans</h4>
{#                        <p class="card-description">#}
{#                            Provided by <code>Digital Beans</code>#}
{#                        </p >#}
                        <div class="table-responsive">
                            <table class="table table-hover" style="margin: 3% 0 15% 0">
                                <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Notes</th>
                                    <th>Duration</th>
                                    <th>Price</th>
                                    <th>Buy</th>
                                    <th>Delete</th>
                                </tr>
                                </thead>

                                <tbody>
                                {% if plans == [] %}
                                    <tr>
                                        <td colspan="6" style="text-align: center">No plans yet</td>
                                    </tr>
                                {% endif %}

                                {% for plan in plans %}
                                    <tr onclick="showPlans({{plan.id}})">
                                        <td>{{plan.name}}</td>
                                        <td>{{plan.intro}}</td>
                                        <td>{{plan.length}}</td>
                                        <td>{{plan.price}}</td>
                                        <td>
                                            <button onclick="buy({{plan.id}})" style="background-color: transparent; border: none;">
                                                <i class="fa fa-credit-card" style="font-size: 1.5rem"></i>
                                            </button>
                                        </td>
                                        <td>
                                            <button onclick="delete_pack({{plan.id}})" style="background-color: transparent; border: none;">
                                                <i class="fa fa-trash" style="font-size: 1.5rem"></i>
                                            </button>

                                        </td>
                                        <script>
                                            function delete_pack (id){
                                                $.get({
                                                    url: '',
                                                    type: 'GET',
                                                    data: ({id : id}),
                                                    success: function (data) {
                                                        window.location.href = '';
                                                    }
                                                })
                                            }

                                            function buy (id) {
                                                $.post({
                                                    url: '',
                                                    type: 'POST',
                                                    data: ({id : id}),
                                                    success: function (data) {
                                                        // Update cart contents
                                                    }
                                                })
                                            }

                                            function showPlans(plan_id_res){
                                                $.get({
                                                    url: '/planning/load_detail',
                                                    type: 'GET',
                                                    data: ({plan_id_res : plan_id_res}),
                                                    success: function (data) {
                                                        window.location.href = "/planning/" + plan_id_res;
                                                    }
                                                })
                                            }
                                        </script>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 grid-margin stretch-card" style="background-color: rgb(232,241,255); display: flex; align-items: center; justify-content: center;">
                <div class="col-md-12 promation-grid" style="background: rgb(232,241,255); border-radius: 5px; padding: 1rem; display: flex; justify-content: center; align-items: center;">
                    <div style="text-align: center;">
                        <h3 style="margin-top: 0.5rem">Customise more package?</h3>
                        <p style="padding-top: 0; margin-bottom: 1rem">Customise your own travel plan using the destinations and accommodations we have provided.</p>
                        <a href="{{ url_for('planning_tool.planning') }}" style="position: relative">
                            <button type="button" class="btn btn-default" style="background-color: #062f3c; color: white;" onclick="showPlans(null)">Create New Personal Plan</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- content-wrapper ends -->
        <!-- partial:../../partials/_footer.html -->
    <footer class="footer">
        <div class="d-sm-flex justify-content-center justify-content-sm-between">
<!--            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Premium <a href="" target="_blank">Bootstrap admin template</a> from BootstrapDash.</span>-->
{#            <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Copyright Â© 2023. All rights reserved.</span>#}
        </div>
    </footer>
        <!-- partial -->
</div>
{% endblock %}